tinymce.PluginManager.add("face", function(a, b) {
    function html_facetable() {
        var a;
         a = '<ul role="list" class="dlineface mce-grid">';
         
         tinymce.each(face_list, function(face_file, face_id) {

                var d = b + "/img/" + face_file;
                a += '<li><a data-mce-url="' + d + '" data-mce-alt="' + face_id + '" tabindex="-1" role="option" aria-label="' + face_id + '"><img src="' + d + '" style="width: 30px; height: 30px" role="presentation" /></a></li>';

        });
        
        a += "</ul>";
        
        return a;
    }
    var face_list = {
      "呵呵": "i_f01.png",
      //"哈哈": "i_f02.png",
      //"吐舌": "i_f03.png",
      "啊": "i_f04.png",
      "酷": "i_f05.png",
      "怒": "i_f06.png",
      //"开心": "i_f07.png",
      "汗": "i_f08.png",
      "泪": "i_f09.png",
      //"黑线": "i_f10.png",
      //"鄙视": "i_f11.png",
      //"不高兴": "i_f12.png",
      //"真棒": "i_f13.png",
      //"钱": "i_f14.png",
      "疑问": "i_f15.png",
      //"阴险": "i_f16.png",
      //"吐": "i_f17.png",
      //"咦": "i_f18.png",
      //"委屈": "i_f19.png",
      //"花心": "i_f20.png",
      //"呼~": "i_f21.png",
      //"笑眼": "i_f22.png",
      //"冷": "i_f23.png",
      //"太开心": "i_f24.png",
      //"滑稽": "i_f25.png",
      //"勉强": "i_f26.png",
      //"狂汗": "i_f27.png",
      //"乖": "i_f28.png",
      "睡觉": "i_f29.png",
      //"惊哭": "i_f30.png",
      //"生气": "i_f31.png",
      //"惊讶": "i_f32.png",
      //"喷": "i_f33.png",
      "爱心": "i_f34.png",
      "心碎": "i_f35.png",
      "玫瑰": "i_f36.png",
      //"礼物": "i_f37.png",
      //"彩虹": "i_f38.png",
      //"星星月亮": "i_f39.png",
      //"太阳": "i_f40.png",
      //"钱币": "i_f41.png",
      //"灯泡": "i_f42.png",
      //"咖啡": "i_f43.png",
      //"蛋糕": "i_f44.png",
      //"音乐": "i_f45.png",
      //"haha": "i_f46.png",
      "胜利": "i_f47.png",
      "大拇指": "i_f48.png",
      "弱": "i_f49.png",
      "OK": "i_f50.png"
    };
    a.addButton("face", {
        type:"panelbutton",
        panel:{
            role:"application",
            autohide:!0,
            html: html_facetable,
            onclick:function(b) {
                var c = a.dom.getParent(b.target, "a");
                c && (a.insertContent('<img class="face" src="' + c.getAttribute("data-mce-url") + '" alt="' + c.getAttribute("data-mce-alt") + '" />'), 
                this.hide());
            }
        },
        tooltip:"Emoticons"
    });
});